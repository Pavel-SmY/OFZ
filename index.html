<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>ОФЗ — гид для начинающего инвестора</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<header class="header">
  <div class="container">
    <h1>Облигации федерального займа</h1>
    <p class="subtitle">
      Реальные данные Московской биржи и Банка России. Понятно и без рекламы.
    </p>
  </div>
</header>

<main class="container">

  <!-- КАТАЛОГ ОФЗ -->
  <section class="card">
    <h2>Каталог выпусков ОФЗ</h2>
    <p class="muted">Источник: Московская биржа (MOEX ISS API)</p>

    <table id="ofzTable">
      <thead>
        <tr>
          <th>Код</th>
          <th>Погашение</th>
          <th>Купон %</th>
          <th>Цена %</th>
          <th>Доходность %</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="6">Загрузка данных…</td></tr>
      </tbody>
    </table>
  </section>

  <!-- КАЛЬКУЛЯТОР -->
  <section id="calcCard" class="card hidden">
    <h2>Расчёт доходности выбранной ОФЗ</h2>

    <div class="calc-grid">
      <div>
        <label>Выпуск</label>
        <div id="calcSecid" class="calc-value">—</div>
      </div>

      <div>
        <label>Цена (% от номинала)</label>
        <input id="calcPrice" type="number" step="0.01">
      </div>

      <div>
        <label>Купон (%)</label>
        <div id="calcCoupon" class="calc-value">—</div>
      </div>

      <div>
        <label>Срок до погашения (лет)</label>
        <div id="calcYears" class="calc-value">—</div>
      </div>
    </div>

    <button id="calcBtn">Рассчитать доходность</button>
    <div id="calcResult" class="calc-result"></div>
  </section>

  <!-- КАРТА ОФЗ -->
  <section class="card">
    <h2>Карта ОФЗ: срок и доходность</h2>
    <canvas id="ofzMap" height="360"></canvas>
  </section>

  <!-- КРИВАЯ ЦБ -->
  <section class="card">
    <h2>Кривая доходности Банка России</h2>
    <p class="muted">Бескупонная кривая (данные ЦБ через MOEX)</p>
    <canvas id="cbCurve" height="360"></canvas>
  </section>

  <!-- ПОДБОР ОФЗ -->
  <section class="card">
    <h2>Подбор ОФЗ для новичка</h2>

    <div class="wizard">
      <div>
        <label>Срок инвестирования</label>
        <select id="wTerm">
          <option value="1">До 1 года</option>
          <option value="3">1–3 года</option>
          <option value="5">3–5 лет</option>
          <option value="10">Более 5 лет</option>
        </select>
      </div>

      <div>
        <label>Нужен регулярный доход</label>
        <select id="wIncome">
          <option value="yes">Да</option>
          <option value="no">Не обязательно</option>
        </select>
      </div>

      <div>
        <label>Защита от инфляции</label>
        <select id="wInflation">
          <option value="no">Не обязательно</option>
          <option value="yes">Важно</option>
        </select>
      </div>
    </div>

    <button id="wizardBtn">Подобрать ОФЗ</button>
    <div id="wizardResult"></div>
  </section>

  <!-- СРАВНЕНИЕ С ВКЛАДОМ -->
  <section class="card">
    <h2>ОФЗ или банковский вклад</h2>

    <div class="compare">
      <div>
        <label>Сумма</label>
        <input id="cAmount" type="number" value="100000">
      </div>

      <div>
        <label>Срок (лет)</label>
        <select id="cYears">
          <option value="1">1</option>
          <option value="3">3</option>
          <option value="5">5</option>
        </select>
      </div>

      <div>
        <label>Ставка по вкладу (%)</label>
        <input id="cDeposit" type="number" value="10">
      </div>
    </div>

    <button id="compareBtn">Сравнить</button>
    <div id="compareResult"></div>
  </section>

  <!-- ИИС -->
  <section class="card">
    <h2>ИИС и налоговые льготы</h2>

    <div class="iia-grid">
      <div class="iia-card">
        <h3>ИИС тип А</h3>
        <p>Возврат НДФЛ — до 52 000 ₽ в год</p>
      </div>

      <div class="iia-card">
        <h3>ИИС тип Б</h3>
        <p>Доход без налога на прибыль</p>
      </div>
    </div>

    <div class="iia-calc">
      <div>
        <label>Взнос в год</label>
        <input id="iiaAmount" type="number" value="400000">
      </div>

      <div>
        <label>Срок (лет)</label>
        <select id="iiaYears">
          <option value="3">3</option>
          <option value="5">5</option>
          <option value="10">10</option>
        </select>
      </div>

      <div>
        <label>Тип ИИС</label>
        <select id="iiaType">
          <option value="A">Тип А</option>
          <option value="B">Тип Б</option>
        </select>
      </div>
    </div>

    <button id="iiaCalcBtn">Рассчитать выгоду</button>
    <div id="iiaResult"></div>
  </section>

</main>

<footer class="footer">
  <p>Информационный проект. Не инвестиционная рекомендация.</p>
</footer>

<script src="app.js"></script>
</body>
</html>